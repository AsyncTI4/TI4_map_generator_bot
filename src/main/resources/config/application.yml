# Application configuration:
# - What: Configures server port and Spring Boot Actuator Prometheus exposure.
# - How: 'server.port' sets the HTTP port; 'management.*' configures actuator endpoints and metrics export.

server:
  port: 8081
  error:
    include-message: always
    include-binding-errors: never
    include-stacktrace: never

management:
  endpoints:
    web:
      exposure:
        include: prometheus

spring:
  datasource:
    url: "jdbc:sqlite:${DB_PATH:./}/tibot.db"
    driver-class-name: org.sqlite.JDBC
    hikari:
      maximum-pool-size: 10
      connection-init-sql: |
        PRAGMA busy_timeout=5000;
        PRAGMA synchronous=NORMAL;
  jpa:
    database-platform: org.hibernate.community.dialect.SQLiteDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate.jdbc.time_zone: UTC
    open-in-view: false
  data:
    jdbc:
      repositories:
        enabled: false

# AI Player Configuration:
# - What: Controls AI player system behavior, scheduling, and safety limits.
# - How: 'ai.enabled' is the master feature flag; other settings control timing, actions, and logging.
ai:
  # Master feature flag - set to true to enable AI players (default: false)
  enabled: false
  
  # Scheduler settings
  scheduler:
    # Polling delay in milliseconds between AI turn checks (default: 5000ms = 5s)
    delay: 5000
  
  # Action limits and timing
  max-actions-per-phase: 10        # Maximum actions per phase to prevent runaway behavior
  action-timeout: 30000            # Timeout for single action in milliseconds (30s)
  action-delay: 1000               # Minimum delay between actions in milliseconds (1s)
  action-jitter: 500               # Random jitter added to delays in milliseconds (0.5s)
  max-retries: 3                   # Maximum retries for failed actions
  
  # Strategy and behavior
  default-difficulty: simple       # Default strategy difficulty (simple, medium, hard)
  
  # Development and debugging
  dry-run: false                   # When true, AI logs decisions without executing
  verbose-logging: true            # Enable detailed logging of AI decisions